antonr@CLab:~/clab/ar$ BOXEN_LOG_LEVEL=debug BOXEN_TIMEOUT_MULTIPLIER=2 BOXEN_DEV_MODE=1 boxen package --disk ~/clab/Check_Point_R81.10_Cloudguard_Openstack_Security_Management_unsecured.qcow2 --vendor checkpoint --platform cloudguard --version R81.10
      info   1657819550 package requested for disk '/home/antonr/clab/Check_Point_R81.10_Cloudguard_Openstack_Security_Management_unsecured.qcow2'
     debug   1657819550 temporary directory '/tmp/boxen448162957' created successfully
     debug   1657819592 disks allocated for packaging
     debug   1657819592 packaging instance created
     debug   1657819592 bundling required packaging files complete
      info   1657819592 boxen dev mode enabled, not deleting temporary directory after installation
     debug   1657819592 pre packaging complete, begin docker-ization!
      info   1657819592 docker build output available at '/tmp/boxen448162957/initial_build.log'
     debug   1657819780 base image building complete!
     debug   1657819781 package install starting
     debug   1657819781 begin instance install
      info   1657819781 install requested
      info   1657819781 qemu instance start requested
     debug   1657819781 launching instance with command: [-name checkpoint_cloudguard -uuid 2f5bce28-b6f0-4c89-b69e-cfd7f0877bbd -accel kvm -display none -machine pc -m 8192 -cpu host -smp 4 -monitor tcp:0.0.0.0:4001,server,nowait -serial telnet:0.0.0.0:5001,server,nowait -drive if=ide,file=disk.qcow2,format=qcow2 -device pci-bridge,chassis_nr=1,id=pci.1 -device virtio-net-pci,netdev=mgmt -netdev user,id=mgmt,net=10.0.0.0/24,tftp=/tftpboot,hostfwd=tcp::21022-10.0.0.15:22,hostfwd=tcp::21023-10.0.0.15:23,hostfwd=tcp::21443-10.0.0.15:443,hostfwd=tcp::21830-10.0.0.15:830,hostfwd=udp::31161-10.0.0.15:161 -device virtio-net-pci,netdev=p001,bus=pci.1,addr=0x2,mac=52:54:00:39:5b:01 -netdev socket,id=p001,listen=:10001 -device virtio-net-pci,netdev=p002,bus=pci.1,addr=0x3,mac=52:54:00:b5:93:02 -netdev socket,id=p002,listen=:10002 -device virtio-net-pci,netdev=p003,bus=pci.1,addr=0x4,mac=52:54:00:e3:22:03 -netdev socket,id=p003,listen=:10003 -device virtio-net-pci,netdev=p004,bus=pci.1,addr=0x5,mac=52:54:00:40:5a:04 -netdev socket,id=p004,listen=:10004 -device virtio-net-pci,netdev=p005,bus=pci.1,addr=0x6,mac=52:54:00:67:4c:05 -netdev socket,id=p005,listen=:10005 -device virtio-net-pci,netdev=p006,bus=pci.1,addr=0x7,mac=52:54:00:b2:1f:06 -netdev socket,id=p006,listen=:10006 -device virtio-net-pci,netdev=p007,bus=pci.1,addr=0x8,mac=52:54:00:90:61:07 -netdev socket,id=p007,listen=:10007 -device virtio-net-pci,netdev=p008,bus=pci.1,addr=0x9,mac=52:54:00:b0:cc:08 -netdev socket,id=p008,listen=:10008]
     debug   1657819781 stdout logger provided, setting execute argument
     debug   1657819781 stderr logger provided, setting execute argument
      info   1657819791 qemu instance start complete
     debug   1657819791 instance started, waiting for start ready state
      info   1657819800 install logs available at '/tmp/boxen448162957/install_build.log', or by inspect container '5cef944fa844d9dc7a40979d18c1e9970ed7431053520b83ed151128cf82f3f6' logs
     debug   1657820698 start ready state acquired, logging in
     debug   1657820717 encountered too many consecutive empty reads, sending return...
     debug   1657820718 found login prompt sending username admin
     debug   1657820734 found password prompt sending password admin
      info   1657820735 found device prompt, done handling login
     debug   1657820735 log in complete
     debug   1657820735 install config lines provided, executing scrapligo on open
     debug   1657820736 initial installation complete
      info   1657820736 save config requested
      info   1657820741 install complete, stopping instance
      info   1657820741 qemu instance stop requested
      info   1657820741 qemu instance stop complete
     debug   1657820825 instance installation complete!
      info   1657820945 final image build logs available at '/tmp/boxen448162957/final_build.log'
     debug   1657820945 packaging complete!
        âœ… finished successfully in 1394 seconds
antonr@CLab:~/clab/ar$ docker images
REPOSITORY                                 TAG       IMAGE ID       CREATED         SIZE
boxen_checkpoint_cloudguard                R81.10    a962f5a8a41a   5 minutes ago   8.8GB
ghcr.io/srl-labs/clab                      latest    06a7d0b10c1f   5 weeks ago     118MB
ubuntu                                     latest    27941809078c   5 weeks ago     77.8MB
ubuntu                                     20.04     20fffa419e3a   5 weeks ago     72.8MB
alpine                                     latest    e66264b98777   7 weeks ago     5.53MB
antonr@CLab:~/clab/ar$ docker tag boxen_checkpoint_cloudguard:R81.10 ghcr.io/chkp-antonr/cp_cloudguard_mgmt:R81.10
antonr@CLab:~/clab/ar$docker rmi boxen_checkpoint_cloudguard:R81.10
antonr@CLab:~/clab/ar$ docker images
REPOSITORY                                 TAG       IMAGE ID       CREATED         SIZE
ghcr.io/chkp-antonr/cp_cloudguard_mgmt     R81.10    a962f5a8a41a   6 minutes ago   8.8GB
ghcr.io/srl-labs/clab                      latest    06a7d0b10c1f   5 weeks ago     118MB
ubuntu                                     latest    27941809078c   5 weeks ago     77.8MB
ubuntu                                     20.04     20fffa419e3a   5 weeks ago     72.8MB
alpine                                     latest    e66264b98777   7 weeks ago     5.53MB
antonr@CLab:~/clab/ar$ docker push ghcr.io/chkp-antonr/cp_cloudguard_mgmt:R81.10
The push refers to repository [ghcr.io/chkp-antonr/cp_cloudguard_mgmt]
80a27036780c: Pushed
654ab95095b9: Pushed
4b4593fb2439: Pushed
10aea7b62ab3: Pushed
a54d9aecfe51: Pushed
f97064363078: Pushed
af7ed92504ae: Mounted from chkp-antonr/cp_clouguard
R81.10: digest: sha256:d68412674930437818a95a1c1eee44100e1a491f9d67731290527afa8e20f8b4 size: 1787
antonr@CLab:~/clab/ar$
antonr@CLab:~/clab/ar$ BOXEN_LOG_LEVEL=debug BOXEN_TIMEOUT_MULTIPLIER=2 BOXEN_DEV_MODE=1 boxen package --disk ~/clab/Check_Point_R81.10_Cloudguard_Openstack_Security_Gateway_unsecured.qcow2 --vendor checkpoint --platform cloudguard --version R81.10
      info   1657823765 package requested for disk '/home/antonr/clab/Check_Point_R81.10_Cloudguard_Openstack_Security_Gateway_unsecured.qcow2'
     debug   1657823765 temporary directory '/tmp/boxen631812667' created successfully
     debug   1657823798 disks allocated for packaging
     debug   1657823798 packaging instance created
     debug   1657823799 bundling required packaging files complete
      info   1657823799 boxen dev mode enabled, not deleting temporary directory after installation
     debug   1657823799 pre packaging complete, begin docker-ization!
      info   1657823799 docker build output available at '/tmp/boxen631812667/initial_build.log'
     debug   1657824032 base image building complete!
     debug   1657824033 package install starting
     debug   1657824033 begin instance install
      info   1657824033 install requested
      info   1657824033 qemu instance start requested
     debug   1657824033 launching instance with command: [-name checkpoint_cloudguard -uuid 069b1cce-553a-44ba-b60f-1c2dfc951328 -accel kvm -display none -machine pc -m 8192 -cpu host -smp 4 -monitor tcp:0.0.0.0:4001,server,nowait -serial telnet:0.0.0.0:5001,server,nowait -drive if=ide,file=disk.qcow2,format=qcow2 -device pci-bridge,chassis_nr=1,id=pci.1 -device virtio-net-pci,netdev=mgmt -netdev user,id=mgmt,net=10.0.0.0/24,tftp=/tftpboot,hostfwd=tcp::21022-10.0.0.15:22,hostfwd=tcp::21023-10.0.0.15:23,hostfwd=tcp::21443-10.0.0.15:443,hostfwd=tcp::21830-10.0.0.15:830,hostfwd=udp::31161-10.0.0.15:161 -device virtio-net-pci,netdev=p001,bus=pci.1,addr=0x2,mac=52:54:00:c7:c7:01 -netdev socket,id=p001,listen=:10001 -device virtio-net-pci,netdev=p002,bus=pci.1,addr=0x3,mac=52:54:00:e7:62:02 -netdev socket,id=p002,listen=:10002 -device virtio-net-pci,netdev=p003,bus=pci.1,addr=0x4,mac=52:54:00:87:00:03 -netdev socket,id=p003,listen=:10003 -device virtio-net-pci,netdev=p004,bus=pci.1,addr=0x5,mac=52:54:00:c7:86:04 -netdev socket,id=p004,listen=:10004 -device virtio-net-pci,netdev=p005,bus=pci.1,addr=0x6,mac=52:54:00:32:83:05 -netdev socket,id=p005,listen=:10005 -device virtio-net-pci,netdev=p006,bus=pci.1,addr=0x7,mac=52:54:00:93:09:06 -netdev socket,id=p006,listen=:10006 -device virtio-net-pci,netdev=p007,bus=pci.1,addr=0x8,mac=52:54:00:26:f9:07 -netdev socket,id=p007,listen=:10007 -device virtio-net-pci,netdev=p008,bus=pci.1,addr=0x9,mac=52:54:00:10:b7:08 -netdev socket,id=p008,listen=:10008]
     debug   1657824033 stdout logger provided, setting execute argument
     debug   1657824033 stderr logger provided, setting execute argument
      info   1657824043 qemu instance start complete
     debug   1657824043 instance started, waiting for start ready state
      info   1657824052 install logs available at '/tmp/boxen631812667/install_build.log', or by inspect container '017b87f01aab669c0f6f90f13ecefffc51c360f0c7bdce9d0fe966a2a1650f81' logs
     debug   1657825010 start ready state acquired, logging in
     debug   1657825029 encountered too many consecutive empty reads, sending return...
     debug   1657825030 found login prompt sending username admin
     debug   1657825031 found password prompt sending password admin
      info   1657825032 found device prompt, done handling login
     debug   1657825032 log in complete
     debug   1657825032 install config lines provided, executing scrapligo on open
     debug   1657825033 initial installation complete
      info   1657825033 save config requested
      info   1657825038 install complete, stopping instance
      info   1657825038 qemu instance stop requested
      info   1657825038 qemu instance stop complete
     debug   1657825092 instance installation complete!
      info   1657825218 final image build logs available at '/tmp/boxen631812667/final_build.log'
     debug   1657825218 packaging complete!
        âœ… finished successfully in 1453 seconds






antonr@CLab:~/clab/ar$ docker images
REPOSITORY                                 TAG       IMAGE ID       CREATED        SIZE
ghcr.io/chkp-antonr/cp_cloudguard          R81.10    f86872c751fe   10 hours ago   6.47GB
ghcr.io/chkp-antonr/cp_cloudguard_mgmt     R81.10    a962f5a8a41a   12 hours ago   8.8GB
ghcr.io/srl-labs/clab                      latest    06a7d0b10c1f   5 weeks ago    118MB
ubuntu                                     latest    27941809078c   5 weeks ago    77.8MB
ubuntu                                     20.04     20fffa419e3a   5 weeks ago    72.8MB
alpine                                     latest    e66264b98777   7 weeks ago    5.53MB
